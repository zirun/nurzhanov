<!DOCTYPE html>
<html>
    <head>
        <title>RocketFirm</title>

        <link href='//fonts.googleapis.com/css?family=Lato:100' rel='stylesheet' type='text/css'>

        <link href="{{ asset('/css/rocket.css') }}" rel="stylesheet">

        <link href="{{ asset('/css/jquery.nouislider.min.css') }}" rel="stylesheet">

        <link href="{{ asset('/css/jquery.nouislider.pips.min.css') }}" rel="stylesheet">
    </head>
    <body>
        <div class="rocket-head">
           <div class="header container">
                <div class="logo"></div>
                <div class="phone"><p>+7 727 272-09-71</p></div>
            </div>
            <div class="headline container">
                <div class="hl-left col-md-offset-1 col-lg-offset-1 col-md-3 col-lg-3">
                    <h3>Депозит со ставкой</h3>
                </div>
                <div class="hl-center col-md-4 col-lg-4">
                    <h2>15,1</h2>
                    <div class="addon">
                        <span class="ampersant">*</span>
                        <span class="persent">%</span>
                    </div>
                    
                </div>
                <div class="hl-right col-md-3 col-lg-3">
                    <h3>это интересно, не так ли?</h3>
                </div>
            </div> 
        </div>
        <div class="container">
            <div class="rocket-sample col-sm-6">
                    
                <div id="denomination-arc">
                    <div class="money-layer">
                        <div class="money money-bes"></div>
                        <div class="money money-bes"></div>
                        <div class="money money-bes"></div>
                    </div>
                    <div class="money-layer">
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                    </div>
                    <div class="money-layer">
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                        <div class="money money-on"></div>
                    </div>
                   
                    
                    
                </div>   

                <div class="bill-block">
                    <div id="price-slider"></div>
                </div>     

            </div>
            <div class="rocket-form col-sm-6">
                <h4>Оставьте заявку</h4>
                <p class="subheading">и приходите без очереди</p>
                <div class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-3">Имя</label>
                        <div class="col-sm-9">
                            <input class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3">Фамилия</label>
                        <div class="col-sm-9">
                            <input class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3">Телефон</label>
                        <div class="col-sm-9">
                            <input class="form-control form-phone">
                            <span class="form-phone-display"></span>
                        </div>
                    </div>
                </div>
                <div class="form-footer">
                    <button type="submit" class="col-sm-4 btn btn-default">Отправить</button>
                    <div class="col-sm-8 flash-info"><p>Вам перезвонит менеджер</br>и все расскажет</p></div>
                </div>
            </div>

            
        </div>
        <div class="container rocket-additional">
                <h4>Дополнительные условия</h4>

                <div class="row">
                    <a href="#" class="info-block col-md-3">
                        <div class="wrap">
                            <p>Минимальная сумма депозита</p>
                            <span>Да, вклад застрахован Казахстанским фондом гарантирования депозитов.</span>
                        </div>
                    </a>

                    <a href="#" class="info-block col-md-3">
                        <div class="wrap">
                            <p>Срок депозита</p>
                            <span>Да, вклад застрахован Казахстанским фондом гарантирования депозитов.</span>
                        </div>
                    </a>

                    <a href="#" class="info-block col-md-3">
                        <div class="wrap">
                            <p>Могу ли я пополнять депозит?</p>
                            <span>Да, вклад застрахован Казахстанским фондом гарантирования депозитов.</span>
                        </div>
                    </a>

                    <a href="#" class="info-block col-md-3">
                        <div class="wrap">
                            <p>Могу ли я снимать деньги с депозита?</p>
                            <span>Да, вклад застрахован Казахстанским фондом гарантирования депозитов.</span>
                        </div>
                    </a>

                </div>
                <div>
                    <a href="#" class="info-block col-md-3">
                        <div class="wrap">
                            <p>Могу ли я переоформить депозит?</p>
                            <span>Да, вклад застрахован Казахстанским фондом гарантирования депозитов.</span>
                        </div>
                    </a>

                    <a href="#" class="info-block col-md-3">
                        <div class="wrap">
                            <p>Вклад застрахован?</p>
                            <span>Да, вклад застрахован Казахстанским фондом гарантирования депозитов.</span>
                        </div>
                    </a>

                    <a href="#" class="info-block col-md-3">
                        <div class="wrap">
                            <p>Какие документы необходимы?</p>
                            <span>Да, вклад застрахован Казахстанским фондом гарантирования депозитов.</span>
                        </div>
                    </a>

                    <a href="#" class="info-block col-md-3">
                        <div class="wrap">
                            <p>Какие есть ограничения?</p>
                            <span>Да, вклад застрахован Казахстанским фондом гарантирования депозитов.</span>
                        </div>
                    </a>
                </div>
            </div>
        <div class="rocket-footer container">
            <p>© Rocket Deposit, 2011–2015</p>
        </div>


    </body>

    <script type="text/javascript" src="/script/jquery.min.js"></script>
     <script type="text/javascript" src="/script/jquery.nouislider.all.min.js"></script>
    <script type="text/javascript">
        $(function() {
            console.log('Rocket Deposit initializing ...');

            

            window.dlayer = [];
            for(var i=0; i<$('#denomination-arc .money-layer').length; i++){
               $('#denomination-arc .money-layer:nth-child('+(i+1)+')').css({'z-index': 40/Math.pow(2, i)}); 
               window.dlayer[i] = $('#denomination-arc .money-layer:nth-child('+(i+1)+')').children(); 
            }




            $("#price-slider").noUiSlider({
                start: 85000, 
                range: {
                    'min': 0,

                    '5%': 5000,
                    '10%': 10000,
                    '15%': 15000,
                    '20%': 25000,
                    '25%': 35000, 
                    '30%': 45000,
                    '35%': 55000,
                    '40%': 65000,
                    '45%': 75000,

                    '50%': 85000, 

                    '54%': 95000,
                    '58%': 105000,
                    '62%': 115000,
                    '66%': 125000,
                    '70%': 135000,
                    '74%': 145000,
                    '78%': 155000,
                    '82%': 165000,
                    '86%': 175000,
                    '90%': 185000,
                    '94%': 195000,

                    'max': 200000
                },
                snap: true
            });

            function filter500( value, type ){
                return value % 10000 ? 2 : 1;
            }

            $("#price-slider").noUiSlider_pips({
                mode: 'values',
                values: [15000, 85000, 195000],
                density: 1,
                filter: filter500,
                format: wNumb({
                    postfix: ' т'
                })
            });

            $(".noUi-pips .noUi-value:contains('15000 т')").addClass('rocket_pip_15');
            $(".noUi-pips .noUi-value:contains('85000 т')").addClass('rocket_pip_85');
            $(".noUi-pips .noUi-value:contains('195000 т')").addClass('rocket_pip_195');


            function make_money_arc(){
                var val = $('#price-slider').val();
                val = parseInt(val.substring(0, val.length - 6));
                var nominal, level;
                if(val>85){
                    nominal = (val-85)/10;
                    level = 2;
                }
                else if(val>15){
                    nominal = (val-15)/10;
                    level = 1;
                }
                else{
                    nominal = val/5;
                    level = 0;
                }

                $(".noUi-pips .noUi-value").css({color: '#ccc'});
                $(".noUi-pips .noUi-value.rocket_pip_"+val).css({color: '#ef4323'});



              for(var i=0; i<dlayer.length; i++){
                    var jlen = dlayer[i].length;
                    var jmid = Math.floor(jlen/2)
                    var deg = Math.round((i*20+30)/jmid);

                    
                    var layer_offset = -(i*60);

                    var x_offset = 40/Math.pow(2, i);
                    var y_offset = 1/Math.pow(2, i); 

                    var midmin = jmid-Math.floor(nominal/2);
                    var midmax = jmid+Math.floor(nominal/2);


                    for(var j=0; j<jlen; j++){
                        if(i<level){  
                            $(dlayer[i][j]).css({
                                transform: 'rotate('+((j-jmid)*deg)+'deg) translate('+(j-jmid)*x_offset+'px, '+(Math.abs((j-jmid)*y_offset)+layer_offset)+'px) scale('+(9-(i/3))/10+')',

                                WebkitBoxShadow: '0px 0px 2px 0px rgba(0,0,0,0.6)',
                                MoxBoxShadow: '0px 0px 2px 0px rgba(0,0,0,0.6)',
                                boxShadow: '0px 0px 2px 0px rgba(0,0,0,0.6)'
                            });
                        }
                        else{
                             $(dlayer[i][j]).css({
                                transform: 'rotate(0deg) translate(0px, 0px) scale(1)',
                                WebkitBoxShadow: '0px 0px 0px 0px rgba(0,0,0,0.6)',
                                MoxBoxShadow: '0px 0px 0px 0px rgba(0,0,0,0.6)',
                                boxShadow: '0px 0px 0px 0px rgba(0,0,0,0.6)'
                            });  
                        }

                        if((j>=midmin)&&(j<=midmax)&&(i<=level)){
                            console.log('n-j', nominal, jmid, j)
                            if(!((Math.round(nominal/2)+jmid)==j)){
                                $(dlayer[i][j]).css({
                                    transform: 'rotate('+((j-jmid)*deg)+'deg) translate('+(j-jmid)*x_offset+'px, '+(Math.abs((j-jmid)*y_offset)+layer_offset)+'px) scale('+(9-(i/3))/10+')', 
                                    WebkitBoxShadow: '0px 0px 2px 0px rgba(0,0,0,0.6)',
                                    MoxBoxShadow: '0px 0px 2px 0px rgba(0,0,0,0.6)',
                                    boxShadow: '0px 0px 2px 0px rgba(0,0,0,0.6)'
                                }); 
                            }
                        }
                    }        

                    $(dlayer[0][1]).css({transform: 'rotate(0deg) translate(0px, 0px) scale(1)', 'z-index': '50'});
                }  


            }

            make_money_arc(2, 11);


            $('#price-slider').on({
                slide: function(event, value){
                    if (!(( value < 5000 ) || ( value > 195000 ))) {
                       make_money_arc();
                    }    
                },
                set: function(event, value){
                    if ( value < 5000 ) {
                        $(this).val(5000);
                    } else if ( value > 195000 ) {
                        $(this).val(195000);
                    }
                    make_money_arc();
                },
                change: function(){
                    //$("#l-change").tShow(450);
                }
            });

            //+7 ___  ___–__–__


            function pad(pad, str, padLeft) {
              if (typeof str === 'undefined') 
                return pad;
              if (padLeft) {
                return (pad + str).slice(-pad.length);
              } else {
                return (str + pad).substring(0, pad.length);
              }
            }
            var input_val = '';
            var input_mask_val = '+7 ___ ___–__–__';
            var mask_text = '';


            $('.rocket-form .form-phone').keyup(function(e) {
                // console.log('----', e,t);
                if(String.fromCharCode(e.keyCode).match(/^[0-9_]+$/) || (e.keyCode == 8)){
                    input_val = $('.rocket-form .form-phone').val();  
                    if(input_val.length>10){
                        $('.rocket-form .form-phone').val(input_val.substr(0,10));
                    }

                    mask_text = (pad('__________',input_val,false)+1).replace(/((?=.*?[1-9])[0-9()_]{3})((?=.*?[1-9])[0-9()_]{3})((?=.*?[1-9])[0-9()_]{2})((?=.*?[1-9])[0-9()_]{2})((?=.*?[1-9])[0-9()_])+$/, "+7 $1 $2-$3-$4-$5"); 
                
               
                    if(mask_text.length>13){
                        input_mask_val = mask_text.substr(0,16); 
                        $('.rocket-form .form-phone-display').html(input_mask_val);
                     } else{
                        $('.rocket-form .form-phone').val(input_val);
                        $('.rocket-form .form-phone-display').html(input_mask_val);
                     }
                }else{
                    $('.rocket-form .form-phone').val(input_val);
                }
               

            });

            $('.rocket-form .form-phone-display').click(function(){
                $('.rocket-form .form-phone').focus();
            });

            $('.rocket-form .form-phone').change(function() {
                console.log(this);
            });




            console.log(dlayer);


        });
    </script>

</html>


